# 다중 파일 업로드 예제

## 간단한 설명
* 다중파일 즉 List 형태로 MultipartFile이 들어온다.
* 파일이 존재하는지 체크해서 파일이 존재한다면 서비스로직에 save()함수를 호출한다.
* save()함수는 for-each문으로 파일은 List에서 하나씩 꺼내서 파일생성전략에 따라 파일 이름을 만들어 저장한다.
* 파일 생성 전략 : uuid + "_" + file.getOriginalFilename()
* 파일을 꺼낼때에는 Resource 형태로 꺼낸다.

## 클라이언트에 파일을 어떻게 꺼내는가?
* /upload/{saveFileName} 형태로 api를 호출하면된다.
* 게시글에 파일이 10개건 100개건 위의 형식에 맞추어 api를 호출하면 다중파일이 클라이언트에게 넘어간다.

## 컨트롤러의 다중요청
* 컨트롤러의 다중요청 처리에 대해 궁금할 수 있다
* 한 게시글에 여러개의 파일이 있고, 여러개의 파일을 호출한다면 하나의 컨트롤러가 어떻게 다 감당하지? 하는 생각이 충분히 들 수 있다.
* 아래 링크는 내가 컨트롤러의 다중요청에 대해 고민하고 정리한 글이다. 참고하라.
* [컨트롤러의 다중요청 처리](https://github.com/liveforone/study/blob/main/spring/core/%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC%EC%9D%98%20%EB%8B%A4%EC%A4%91%EC%9A%94%EC%B2%AD.md)

## 한계점
* 해당 예제는 한계점이 있다.
* 그것은 file을 게시글과 테이블로 빼서 저장하는 전략인데,
* 파일의 갯수 만큼 insert 쿼리가 나간다.
* 따라서 성능에 지나치게 영향을 주고 싶지 않다면 파일 업로드 갯수를 제한하면 된다.
* 컨트롤러 단에서 파일 갯수를 제한해서 초과하면 초과했다고 메세지를 띄우는 형태로 해결하면된다.